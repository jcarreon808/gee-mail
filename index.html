<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        
        for(var i = 0; i<geemails.length; i++) { //created for loop to iterate through array of objects
			// console.log(geemails[i]); console log array to see what kind of data was stored inside
			console.log(geemails[i].sender);//console log sender property 
        	console.log(geemails[i].date);//console log date property
        	console.log(geemails[i].subject);//console log subject property
        	console.log(geemails[i].body);//console log body property

        	var emailBox = document.createElement('div');//created new element 'div' 
        	emailBox.className = "emailcontainers";//gave element class name of 'emailcontainers'
        	mainBox.appendChild(emailBox);//attached this div to the id of mainBox

        	var senderBox = document.createElement('div');//created new element using DOM to store sender data
        	senderBox.className = "sender";//gave element class name of sender
        	senderBox.innerHTML = geemails[i].sender;// stored sender property of the geemail object into senderBox div
        	emailBox.appendChild(senderBox);//attach this div to main div emailBox

        	var subjectBox = document.createElement ('div');//created another div named subjectBox
        	subjectBox.className = "subject";//gave element class name of subject
        	subjectBox.innerHTML = geemails[i].subject;//stored subject property of geemail object into this div
        	emailBox.appendChild(subjectBox);//attached new div to emailBox

            var dateBox = document.createElement ('div');//create new element using DOM to store date data
            dateBox.className = "date";//gave element class name of date
            dateBox.innerHTML = geemails[i].date;//stored date property of geemail object in this div
            emailBox.appendChild(dateBox);//attach this div to emailBox

            var bodyBox = document.createElement ('div');//create new element using DOM to store body data
            bodyBox.className = "body";//gave element class name body
            bodyBox.innerHTML = geemails[i].body;//stored body property of geemail boject into bodyBox div
            emailBox.appendChild(bodyBox);//attach this div to emailBox
            }

            var emailElements = document.getElementsByClassName ("emailcontainers");
        //created variabled 'emailElements' and used emailcontainer class since element already created

            for (var p = 0; p < emailElements.length; p++){
                emailElements[p].addEventListener('mouseover', showMessage);
         //for loop to iterate through each object again adding mouseover event

             function showMessage(event){
                var msg = this.querySelectorAll(".body")[0];
                if(msg.style.display === 'none'){
                    msg.style.display = 'block';
                }else{
                    msg.style.display = 'none';
                }
            }

         }//create function to allow message to open and close when mouse over using an if/else statement. Set display to none so when mouse hovers over, the msg will display and vice versa

            var inboxCounter = document.createElement('div');//create new element for inbox count
            inboxCounter.id = "counter";// dive new div id name of counter
            inboxCounter.innerHTML = "Inbox " + geemails.length;//store length of array into new div 
            inbox.appendChild(inboxCounter);//attach this to div id named inbox


            function datNewNew(){
            var newOne = getNewMessage();//stored getNewMessage function into variable named newOne
        
            var emailBox = document.createElement('div');//created new element 'div'
            emailBox.className = "emailcontainers";//gave it class name of 'emailcontainers'
            mainBox.appendChild(emailBox);//attached this div id name mainBox
      
            var senderBox = document.createElement('div');//created new element 'div'
            senderBox.className = "sender";//gave element class name sender
            senderBox.innerHTML = newOne.sender;//stored sender property of object into div
            emailBox.appendChild(senderBox);//attached this div to main div emailBox

            var subjectBox = document.createElement ('div');//created new element 'div'
            subjectBox.className = "subject";//gave it class name of subject
            subjectBox.innerHTML = newOne.subject;//stored subject property of object into div
            emailBox.appendChild(subjectBox);//this div to main div emailBox

            var dateBox = document.createElement ('div');//create new element 'div'
            dateBox.className = "date";//gave it class name  of date
            dateBox.innerHTML = newOne.date;//store date property of object into div
            emailBox.appendChild(dateBox);//attach this div to main div emailBox

            var bodyBox = document.createElement ('div');//create new element 'div'
            bodyBox.className = "body";//gave it class name of body
            bodyBox.innerHTML = newOne.body;//store body property of object into div
            emailBox.appendChild(bodyBox);//attach this div to main div emailBox
        
    
        var emailElements = document.getElementsByClassName ("emailcontainers");
        //used exisiting class 'emailcontainers' 

            for (var p = 0; p < emailElements.length; p++){
                emailElements[p].addEventListener('mouseover', showMessage);
            //needed to make another mouseover event for new messages being generated and also loop through them

             function showMessage(event){
                var msg = this.querySelectorAll(".body")[0];
                if(msg.style.display === 'none'){
                    msg.style.display = 'block';
                }else{
                    msg.style.display = 'none';//created function to allow mouseover event for new messages generated
                }
            }

         }

            var counts = document.getElementById('inbox');
            counts.innerHTML = "Inbox " + geemails.length++;
           //used existing id 'inbox' to keep count of new emails coming through 
    }
            
            setInterval(datNewNew, 3000);//set time for function to generate new message(3 sec)

  


         
      };
    </script>
	</head>
	<body>
		<div class="container" id="main">
			<div id="header"> JP's Geemail challenge </div>
        <div id="inbox"></div>
        <div id="side">
            <p>Drafts</p>
            <p>Sent</p>
            <p>Archive</p>
            <p>Spam</p>
            <p>Trash</p>
            <p>Folders</p>   
        </div>
        <div id="pic">
            <img src ="http://icons.iconarchive.com/icons/webalys/kameleon.pics/512/Coding-Html-icon.png" style="width:225px;height:225px;">
            <img src="https://www.planet-source-code.com/vb/2010Redesign/images/LangugeHomePages/HTML5_CSS_JavaScript.png" style="width:225px;height:225px;">
            <img src="http://www.devleague.com/img/dev_league_emblem.png" style="width:225px;height:225px;">
        </div>
        <div id="mainBox">
            <div id="bar">
                <a href="http://www.devleague.com">Want to become a coder?<span>Sign up TODAY: Devleague!</span>
                </a>
            </div>
        </div>
        <div id="addnew"></div>

        </div>
		</div>
	</body>
</html
