<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        for(var i = 0; i<geemails.length; i++) {
			//console.log(geemails[i]);
			console.log(geemails[i].sender);
        	console.log(geemails[i].date);
        	console.log(geemails[i].subject);
        	console.log(geemails[i].body);

        	var emailBox = document.createElement('div');
        	emailBox.className = "emailcontainers";
        	mainBox.appendChild(emailBox);
      
        	var senderBox = document.createElement('div');
        	senderBox.className = "sender";
        	senderBox.innerHTML = geemails[i].sender;
        	emailBox.appendChild(senderBox);

        	var subjectBox = document.createElement ('div');
        	subjectBox.className = "subject";
        	subjectBox.innerHTML = geemails[i].subject;
        	emailBox.appendChild(subjectBox);

            var dateBox = document.createElement ('div');
            dateBox.className = "date";
            dateBox.innerHTML = geemails[i].date;
            emailBox.appendChild(dateBox);

            var bodyBox = document.createElement ('div');
            bodyBox.className = "body";
            bodyBox.innerHTML = geemails[i].body;
            emailBox.appendChild(bodyBox);
            }

            var emailElements = document.getElementsByClassName ("emailcontainers");
        
            for (var p = 0; p < emailElements.length; p++){
                emailElements[p].addEventListener('click', showMessage);
            

             function showMessage(event){
                var msg = this.querySelectorAll(".body")[0];
                if(msg.style.display === 'none'){
                    msg.style.display = 'block';
                }else{
                    msg.style.display = 'none';
                }
            }

         }
            var inboxCounter = document.createElement('div');
            inboxCounter.id = "counter";
            inboxCounter.innerHTML = "Inbox " + geemails.length;
            inbox.appendChild(inboxCounter);


            function datNewNew(){
            var newOne = getNewMessage();
            /*var newMessage = document.createElement('div');
            newMessage.id = "message";
            newMessage.innerHTML = newOne;
             mainBox.appendChild(newMessage);*/

           
            var emailBox = document.createElement('div');
            emailBox.className = "emailcontainers";
            mainBox.appendChild(emailBox);
      
            var senderBox = document.createElement('div');
            senderBox.className = "sender";
            senderBox.innerHTML = newOne.sender;
            emailBox.appendChild(senderBox);

            var subjectBox = document.createElement ('div');
            subjectBox.className = "subject";
            subjectBox.innerHTML = newOne.subject;
            emailBox.appendChild(subjectBox);

            var dateBox = document.createElement ('div');
            dateBox.className = "date";
            dateBox.innerHTML = newOne.date;
            emailBox.appendChild(dateBox);

            var bodyBox = document.createElement ('div');
            bodyBox.className = "body";
            bodyBox.innerHTML = newOne.body;
            emailBox.appendChild(bodyBox);
        
    
        var emailElements = document.getElementsByClassName ("emailcontainers");
        
            for (var p = 0; p < emailElements.length; p++){
                emailElements[p].addEventListener('click', showMessage);
            

             function showMessage(event){
                var msg = this.querySelectorAll(".body")[0];
                if(msg.style.display === 'none'){
                    msg.style.display = 'block';
                }else{
                    msg.style.display = 'none';
                }
            }

         }
            

    //var inboxCounter = document.createElement('div');
            inboxCounter.id = "counter";
            inboxCounter.innerHTML = "Inbox " + geemails.length++;
            inbox.appendChild(inboxCounter);
    }
            
            setInterval(datNewNew, 3000);

         
      };
    </script>
	</head>
	<body>
		<div class="container" id="main">
			<div id="header"> Geemail challenge </div>
        <div id="inbox"></div>
        <div id="side">
            <p>Drafts</p>
            <p>Sent</p>
            <p>Archive</p>
            <p>Spam</p>
            <p>Trash</p>
            <p>Folders</p>   
        </div>
        <div id="pic"></div>
        <div id="mainBox"></div>
        <div id="addnew"></div>

        </div>
		</div>
	</body>
</html
